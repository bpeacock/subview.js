!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){!function(a){var c="undefined";!function(a,c){"undefined"!=typeof b?b.exports=c():"function"==typeof define&&"object"==typeof define.amd?define(c):this[a]=c()}("log",function(){function b(b){return typeof console===c?l:console[b]===a?console.log!==a?d(console,"log"):l:d(console,b)}function d(b,c){var d=b[c];if(d.bind!==a)return b[c].bind(b);if(Function.prototype.bind===a)return e(d,b);try{return Function.prototype.bind.call(b[c],b)}catch(f){return e(d,b)}}function e(a,b){return function(){Function.prototype.apply.apply(a,[b,arguments])}}function f(a){for(var b=0;b<m.length;b++)k[m[b]]=a(m[b])}function g(){return typeof window!==c&&window.document!==a&&window.document.cookie!==a}function h(){try{return typeof window!==c&&window.localStorage!==a}catch(b){return!1}}function i(a){var b;for(var c in k.levels)if(k.levels.hasOwnProperty(c)&&k.levels[c]===a){b=c;break}if(h())window.localStorage.loglevel=b;else{if(!g())return;window.document.cookie="loglevel="+b+";"}}function j(){var a;if(h()&&(a=window.localStorage.loglevel),!a&&g()){var b=n.exec(window.document.cookie)||[];a=b[1]}k.setLevel(k.levels[a]||k.levels.WARN)}var k={},l=function(){},m=["trace","debug","info","warn","error"],n=/loglevel=([^;]+)/;return k.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},k.setLevel=function(d){if("number"==typeof d&&d>=0&&d<=k.levels.SILENT){if(i(d),d===k.levels.SILENT)return void f(function(){return l});if(typeof console===c)return f(function(a){return function(){typeof console!==c&&(k.setLevel(d),k[a].apply(k,arguments))}}),"No console available for logging";f(function(a){return d<=k.levels[a.toUpperCase()]?b(a):l})}else{if("string"!=typeof d||k.levels[d.toUpperCase()]===a)throw"log.setLevel() called with invalid level: "+d;k.setLevel(k.levels[d.toUpperCase()])}},k.enableAll=function(){k.setLevel(k.levels.TRACE)},k.disableAll=function(){k.setLevel(k.levels.SILENT)},j(),k})}()},{}],2:[function(a,b){(function(a){!function(a){var c={selector:a.jQuery||a.Zepto||a.ender||a.$,template:a.Handlebars||a.Mustache};"function"==typeof define&&define.amd?define([],function(){return c}):"undefined"!=typeof b.exports?b.exports=c:a.unopinionate=c}("undefined"!=typeof window?window:a)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(a,b){var c=a("loglevel"),d=function(){},e=function(){};e.prototype={isSubview:!0,once:function(a){for(var b=0;b<this._onceFunctions.length;b++)this._onceFunctions[b].apply(this,[a]);return this},_onceFunctions:[],init:function(a){for(var b=0;b<this._initFunctions.length;b++)this._initFunctions[b].apply(this,[a]);return this},_initFunctions:[],clean:function(){for(var a=0;a<this._cleanFunctions.length;a++)this._cleanFunctions[a].apply(this,[]);return this},_cleanFunctions:[],active:!1,remove:function(){if(this.active){var a=this.wrapper.parentNode;a&&a.removeChild(this.wrapper),this.clean(),this.pool._release(this)}return this},template:"",data:{},subviews:{},reRender:!1,tagName:"div",className:"",preRender:d,postRender:d,render:function(){var a=this,b="";if(postLoad=!1,this.preRender(),"string"==typeof this.template)b=this.template;else{var d="function"==typeof this.data?this.data():this.data;d.subview={},$.each(this.subviews,function(a){postLoad=!0,d.subview[a]="<script class='post-load-view' type='text/html' data-name='"+a+"'></script>"}),$.isFunction(this.template)?b="function"==typeof this.template.render?this.template.render(d):this.template(d):c.error("Templating engine not recognized.")}if(this.html(b),postLoad)for(var e=this.$wrapper.find(".post-load-view"),f=e.length;f--;){var g=$(e[f]),h=a.subviews[g.attr("data-name")];h.isSubviewPool&&(h=h.spawn()),g.after(h.$wrapper).remove()}return this.postRender(),this},html:function(a){for(var b=this.$("."+this._subviewCssClass),c=b.length;c--;)subview(b[c]).remove();return this.wrapper.innerHTML=a,this},listeners:{},trigger:function(a,b){var c=this;b=b||[];var d={up:"find",down:"parents",across:"siblings",all:null,self:this.$wrapper};return $.each(d,function(d,e){var f=".listener-"+d+"-"+a;f=f+", "+f+"-"+c.type;for(var g=e?e.jquery?e:c.$wrapper[e](f):$(f),h=0;h<g.length;h++){var i=subview(g[h]),j=i.listeners[d+":"+a+":"+c.type];if(j&&j.apply(i,b)===!1)return!1;var k=i.listeners[d+":"+a];if(k&&k.apply(i,b)===!1)return!1}}),this},_bindListeners:function(){var a=this;return $.each(this.listeners,function(b,c){b=b.split(",");for(var d=b.length;d--;){var e=b[d].replace(/ /g,""),f=e.split(":"),g=f[0],h=f[1],i=f[2]||null;"self"!=g&&a.$wrapper.addClass("listener-"+g+"-"+h+(i?"-"+i:"")),a.listeners[e]=c}}),this},$:function(a){return this.$wrapper.find(a)},_traverse:function(a,b){var c=this.$wrapper[a]("."+(b?this._subviewCssClass+"-"+b:"subview"));if(c){if(1===c.length)return c[0][subview._domPropertyName];if(c.length>1){for(var d=c.length,e=[];d--;)e.push(c[d][subview._domPropertyName]);return e}return null}return null},parent:function(a){return this._traverse("closest",a)},next:function(a){return this._traverse("next",a)},prev:function(a){return this._traverse("prev",a)},children:function(a){return this._traverse("find",a)},_subviewCssClass:"subview",_addDefaultClasses:function(){var a=this.className.split(" ");a.push(this._subviewCssClass+"-"+this.type);for(var b=this.super;;){if(!b.type)break;a.push(this._subviewCssClass+"-"+b.type),b=b.super}return a.push(this._subviewCssClass),this.$wrapper.addClass(a.join(" ")),this},_loadExtensions:function(){var a=this;return $.each(this,function(b,c){c._isSubviewExtension&&(a[b]=c(a))}),this}},b.exports=e},{loglevel:1}],4:[function(a,b){var c=a("unopinionate").selector,d=function(a){this.Subview=a,this.type=a.prototype.type,this.super=a.prototype.super,this.Subview.prototype.pool=this,this.pool=[]};d.prototype={isSubviewPool:!0,spawn:function(a,b){var d=a?a.jquery?a:c(a):null;if(a=a&&a.jquery?a[0]:a,a&&a.view)return a.view;var e;b=b||(c.isPlainObject(a)?a:void 0),a&&a.nodeType||(0!==this.pool.length?e=this.pool.pop():(a=document.createElement(this.Subview.prototype.tagName),d=c(a)));var f;return e||(f=!0,e=new this.Subview,a[subview._domPropertyName]=e,e.wrapper=a,e.$wrapper=d,e._addDefaultClasses(),e._bindListeners(),e._loadExtensions(),e.once()),e.active=!0,(f||e.reRender)&&e.render(),e.init(b),e},extend:function(a,b){return subview(a,this,b)},destroy:function(){this.pool=null,delete subview.Subviews[this.type]},_release:function(a){return a.active=!1,this.pool.push(a),this}},b.exports=d},{unopinionate:2}],5:[function(a,b){var c=a("loglevel"),d=a("unopinionate").selector,e=a("./SubviewPool"),f=a("./Subview"),g=function(){},h=(new RegExp("^"+f.prototype._subviewCssClass+"-"),function(a,b,c){var g;if(a){if(a.nodeType||a.jquery)return(a.jquery?a[0]:a)[h._domPropertyName]||null;if(b&&b.isSubviewPool?g=b.Subview:(c=b,g=f),c=c||{},h._validateName(a)&&h._validateConfig(c)){for(var i=function(){},j=new g,k=["once","init","clean"],l=0;l<k.length;l++){var m=k[l],n="_"+m+"Functions";c[n]=j[n].slice(0),c[m]&&(c[n].push(c[m]),delete c[m])}c.listeners&&d.each(j.listeners,function(a,b){c.listeners[a]=c.listeners[a]?function(a,b){return function(){return a.apply(this,arguments)===!1?!1:b.apply(this,arguments)}}(c.listeners[a],b):b});for(var o in c)j[o]=c[o];i.prototype=j,i.prototype.type=a,i.prototype.super=g.prototype;var p=new e(i);return h.Subviews[a]=p,p}return null}return null});h.Subviews={},h._domPropertyName="subview12345",h.lookup=function(a){return"string"==typeof a?this.Subviews[a]:a.isSubviewPool?a:a.isSubview?a.pool:void 0},h._validateName=function(a){return a.match(/^[a-zA-Z0-9\-_]+$/)?h.Subviews[a]?(c.error("subview '"+a+"' is already defined."),!1):!0:(c.error("subview name '"+a+"' is not alphanumeric."),!1)},h._reservedMethods=["html","remove","parent","children","next","prev","trigger","traverse","$","_bindListeners","active","_subviewCssClass","_addDefaultClasses","$wrapper","wrapper"],h._validateConfig=function(a){var b=!0;return d.each(a,function(a){-1!==h._reservedMethods.indexOf(a)&&(c.error("Method '"+a+"' is reserved as part of the subview API."),b=!1)}),b},h.init=function(){var a=h.lookup("main");a&&(h.main=a.spawn(),h.main.$wrapper.appendTo("body"))},h.extension=function(a){var b=function(a,b){this.view=b,this.config=a};return b.prototype=a,b.prototype.init||(b.prototype.init=g),function(a){var c=function(c){var d=new b(a,c);return d.init.apply(d,[a,c]),d};return c._isSubviewExtension=!0,c}},window.subview=b.exports=h,d(function(){h.noInit||h.init()})},{"./Subview":3,"./SubviewPool":4,loglevel:1,unopinionate:2}]},{},[5]);
//# sourceMappingURL=subview.min.map